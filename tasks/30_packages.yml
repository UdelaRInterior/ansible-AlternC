---
# Packages installation required for AltenC 

# Módulos PHP de propósito general pero que no se incluye en el instalador de AlternC
- name: Install or update most popular PHP modules not included in AlternC dependencies
  apt:
    name: "{{ alternc_packages }}"
    state: latest

- name: Install MySql database server (may be long, take a coffee!! )
  apt:
    name: "{{ alternc_packages_mysql }}"
    state: latest
    default_release: stable  # redundant
    cache_valid_time: 3600

- name: Install or update apt-transport-https
  apt:
    name: apt-transport-https
    state: present
    cache_valid_time: 3600

- name: Install augeas-lenses
  apt:
    name: augeas-lenses
    state: present
    cache_valid_time: 3600
  when: ansible_distribution_release == "buster"

- name: Install or update phpmyadmin and php-twig
  apt:
    name: 
    - phpmyadmin
    - php-twig
    - php-symfony-config
    - php-symfony-dependency-injection
    - php-symfony-expression-language
    - php-symfony-service-contracts
    - php-symfony-yaml
    default_release: sid
    state: latest
    cache_valid_time: 3600
  when: ansible_distribution_release == "buster"

- name: Install or update dependencies of alternc-certificate-provider-letsencrypt
  apt:
    name: 
    - python3-cffi-backend
    - python3-distutils
    - python3-lib2to3
    - python3-zope.hookable
    - python3-zope.interface
    default_release: sid
    state: latest
    cache_valid_time: 3600
  when: ansible_distribution_release == "buster"

...
